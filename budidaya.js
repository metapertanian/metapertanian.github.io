window.kasData = {
  "Tahap 1": {
    awal: "10 Oktober 2025",
    akhir: "9 Oktober 2026",
    plafond: "Rp 10.000.000",
    transaksi: [
      {
        tanggal: "2025-08-28",
        keterangan: "Panen Singkong",
        kategori: "Singkong",
        tipe: "Omzet",
        nominal: 6000000,
        luas: { jumlah: 16, satuan: "Rante" },
        umur: { jumlah: 9, satuan: "Bulan" },
        hasil: { jumlah: 15, satuan: "Ton" },
        catatan: "",
        foto: "img/singkong.jpg",
        video: ""
      },
      {
        tanggal: "2025-08-22",
        keterangan: "Panen Timun",
        kategori: "Timun",
        tipe: "Omzet",
        nominal: 2047000,
        luas: { jumlah: 500, satuan: "m² (1000 lubang)" },
        umur: { jumlah: 55, satuan: "Hari" },
        hasil: { jumlah: 685, satuan: "Kg" },
        catatan: "",
        foto: "img/timun.jpg",
        video: ""
      },
      {
        tanggal: "2025-07-30",
        keterangan: "Panen Padi",
        kategori: "Padi",
        tipe: "Omzet",
        nominal: 960000,
        luas: { jumlah: 6, satuan: "Rante (Rawa)" },
        umur: { jumlah: 85, satuan: "Hari" },
        hasil: { jumlah: 160, satuan: "Kg" },
        catatan: "",
        foto: "img/padi.jpg",
        video: ""
      },
      {
        tanggal: "2025-07-01",
        keterangan: "Panen Terong",
        kategori: "Terong",
        tipe: "Omzet",
        nominal: 200000,
        luas: { jumlah: 500, satuan: "m² (500 pohon)" },
        umur: { jumlah: 4, satuan: "Bulan" },
        hasil: { jumlah: 50, satuan: "Kg" },
        catatan: "",
        foto: "img/terong.jpg",
        video: ""
      },
      {
        tanggal: "2025-04-15",
        keterangan: "Panen Padi",
        kategori: "Padi",
        tipe: "Omzet",
        nominal: 4320000,
        luas: { jumlah: 6, satuan: "Rante (Rawa)" },
        umur: { jumlah: 90, satuan: "Hari" },
        hasil: { jumlah: 720, satuan: "Kg" },
        catatan: "",
        foto: "img/padi.jpg",
        video: ""
      },
      {
        tanggal: "2025-04-06",
        keterangan: "Panen Cabai",
        kategori: "Cabai",
        tipe: "Omzet",
        nominal: 1000000,
        luas: { jumlah: 500, satuan: "m² (1000 pohon)" },
        umur: { jumlah: 6, satuan: "Bulan" },
        hasil: { jumlah: 25, satuan: "Kg" },
        catatan: "",
        foto: "img/cabai.jpg",
        video: ""
      },
      {
        tanggal: "2024-07-05",
        keterangan: "Panen Singkong",
        kategori: "Singkong",
        tipe: "Omzet",
        nominal: 31500000,
        luas: { jumlah: 1.7, satuan: "Ha" },
        umur: { jumlah: 6, satuan: "Bulan" },
        hasil: { jumlah: 37, satuan: "Ton" },
        catatan: "",
        foto: "img/singkong.jpg",
        video: ""
      },
      {
        tanggal: "2023-12-01",
        keterangan: "Panen Singkong",
        kategori: "Singkong",
        tipe: "Omzet",
        nominal: 1200000,
        luas: { jumlah: 4, satuan: "Rante (1600 m²)" },
        umur: { jumlah: 5, satuan: "Bulan" },
        hasil: { jumlah: 1, satuan: "Ton" },
        catatan: "",
        foto: "img/singkong.jpg",
        video: ""
      },
      {
        tanggal: "2023-06-05",
        keterangan: "Panen Singkong",
        kategori: "Singkong",
        tipe: "Omzet",
        nominal: 3500000,
        luas: { jumlah: 4, satuan: "Rante (1600 m²)" },
        umur: { jumlah: 10, satuan: "Bulan" },
        hasil: { jumlah: 4.5, satuan: "Ton" },
        catatan: "",
        foto: "img/singkong.jpg",
        video: ""
      },
      {
        tanggal: "2022-10-15",
        keterangan: "Panen Singkong",
        kategori: "Singkong",
        tipe: "Omzet",
        nominal: 5000000,
        luas: { jumlah: 8, satuan: "Rante (3200 m²)" },
        umur: { jumlah: 8, satuan: "Bulan" },
        hasil: { jumlah: 6, satuan: "Ton" },
        catatan: "",
        foto: "img/singkong.jpg",
        video: ""
      },
      {
        tanggal: "2022-08-01",
        keterangan: "Panen Singkong",
        kategori: "Singkong",
        tipe: "Omzet",
        nominal: 3000000,
        luas: { jumlah: 4, satuan: "Rante (1600 m²)" },
        umur: { jumlah: 11, satuan: "Bulan" },
        hasil: { jumlah: 4, satuan: "Ton" },
        catatan: "",
        foto: "img/singkong.jpg",
        video: ""
      },
      {
        tanggal: "2022-08-05",
        keterangan: "Panen Singkong",
        kategori: "Singkong",
        tipe: "Omzet",
        nominal: 2500000,
        luas: { jumlah: 5, satuan: "Rante (2000 m²)" },
        umur: { jumlah: 5, satuan: "Bulan" },
        hasil: { jumlah: 3, satuan: "Ton" },
        catatan: "",
        foto: "img/singkong.jpg",
        video: ""
      },
      {
        tanggal: "2022-02-15",
        keterangan: "Panen Singkong",
        kategori: "Singkong",
        tipe: "Omzet",
        nominal: 6000000,
        luas: { jumlah: 8, satuan: "Rante (3200 m²)" },
        umur: { jumlah: 6, satuan: "Bulan" },
        hasil: { jumlah: 6, satuan: "Ton" },
        catatan: "",
        foto: "img/singkong.jpg",
        video: ""
      },
      {
        tanggal: "2021-09-01",
        keterangan: "Panen Singkong",
        kategori: "Singkong",
        tipe: "Omzet",
        nominal: 3000000,
        luas: { jumlah: 4, satuan: "Rante (1600 m²)" },
        umur: { jumlah: 10, satuan: "Bulan" },
        hasil: { jumlah: 4, satuan: "Ton" },
        catatan: "",
        foto: "img/singkong.jpg",
        video: ""
      },
      {
        tanggal: "2021-08-10",
        keterangan: "Panen Singkong",
        kategori: "Singkong",
        tipe: "Omzet",
        nominal: 2500000,
        luas: { jumlah: 5, satuan: "Rante (2000 m²)" },
        umur: { jumlah: 5, satuan: "Bulan" },
        hasil: { jumlah: 3, satuan: "Ton" },
        catatan: "",
        foto: "img/singkong.jpg",
        video: ""
      }
    ]
  }
};

// ================= Fungsi =================

// Ambil semua transaksi dari periode tertentu
function getTransactionsByPeriod(period) {
  return window.kasData[period]?.transaksi || [];
}

// Ambil semua periode
function getAllPeriods() {
  return Object.keys(window.kasData).sort((a, b) =>
    a.localeCompare(b, undefined, { numeric: true })
  );
}

// Ambil periode terbaru
function getLatestPeriod() {
  const periods = getAllPeriods();
  return periods[periods.length - 1] || null;
}

// Ambil semua transaksi dari seluruh periode
function getAllTransactions() {
  return Object.values(window.kasData).flatMap(p => p.transaksi || []);
}

// Ekspor ke window
if (typeof window !== "undefined") {
  window.kas = {
    getTransactionsByPeriod,
    getAllPeriods,
    getLatestPeriod,
    getAllTransactions,
    raw: window.kasData
  };
}