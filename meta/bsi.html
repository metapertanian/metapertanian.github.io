<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/css/style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://kit.fontawesome.com/73db2f45cc.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="/masjid/gaya.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <title>Laporan Keuangan BSI</title>
</head>

<body class="bg-dark text-light">

  <!-- Header -->
  <div class="col-lg-3 d-flex flex-column align-items-center justify-content-center border-custom py-4 mx-auto">
    <div class="d-block border-light border border-2 rounded-circle overflow-hidden" style="width: 8em;"
      data-bs-toggle="modal" data-bs-target="#showImage" id="profile">
      <img class="img-fluid">
    </div>
    <span class="pt-3 text-center">
      <h1><i class="fas fa-wallet"></i> Laporan Keuangan BSI</h1>
    </span>
  </div>  

  <!-- Modal Foto -->
  <div class="modal fade" id="showImage" tabindex="-1" aria-labelledby="showImageLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content bg-dark text-light">
        <div class="modal-header">
          <h5 class="modal-title">Profil</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <img class="img-fluid img-thumbnail profile">
        </div>
      </div>
    </div>
  </div>  

  <script>
    $(document).ready(() => {
      $('#profile img').attr('src', '/img/risma_1.png');
      $('#profile').on('click', () => {
        $('img.img-fluid.profile').attr('src', $('#profile img').attr('src'));
      });
    });
  </script> 

  <div class="container my-4">

    <!-- Filter Periode -->
    <div class="text-center mb-4">
      <div id="periode-filter"></div>
      <p id="last-updated" class="mt-2 fst-italic small text-muted"></p>
    </div>

    <!-- Laporan Per Komoditas -->
    <div class="card bg-dark border-light shadow-sm mb-5">
      <div class="card-header text-center">
        <h3>ğŸŒ¾ Laporan Per Komoditas</h3>
        <small>Ringkasan omzet, biaya, dan laba bersih per komoditas</small>
      </div>
      <div class="card-body table-responsive">
        <table class="table table-dark table-hover table-bordered text-center">
          <thead class="table-secondary text-dark">
            <tr>
              <th>Komoditas</th>
              <th>Omzet</th>
              <th>Biaya</th>
              <th>Laba Bersih</th>
            </tr>
          </thead>
          <tbody id="komoditas-body"></tbody>
        </table>
      </div>
    </div>

    <!-- Arus Kas -->
    <div class="card bg-dark border-light shadow-sm mb-5">
      <div class="card-header text-center">
        <h3>ğŸ“Š Arus Kas</h3>
        <small>Klik uang masuk/keluar untuk detail transaksi</small>
      </div>
      <div class="card-body table-responsive">
        <table class="table table-dark table-striped table-bordered align-middle text-center">
          <thead class="table-secondary text-dark">
            <tr>
              <th>Tanggal</th>
              <th>Masuk<br>(Ribu)</th>
              <th>Keluar<br>(Ribu)</th>
              <th>Saldo<br>(Ribu)</th>
            </tr>
          </thead>
          <tbody id="summary-body"></tbody>
          <tfoot id="summary-foot"></tfoot>
        </table>
      </div>
    </div>

    <!-- Riwayat Transaksi -->
    <div class="card bg-dark border-light shadow-sm">
      <div class="card-header text-center">
        <h3>ğŸ§¾ Riwayat Transaksi</h3>
      </div>
      <div class="card-body">
        <div id="history"></div>
        <div id="history-pagination" class="pagination justify-content-center mt-3"></div>
      </div>
    </div>

  </div>

  <!-- Script utama -->
  <script src="bsi.js"></script>
  <script src="fungsi1.js"></script>
  <script src="fungsi2.js"></script>

  <!-- WA Support (satu admin saja) -->
  <div class="chat-wa-btn" onclick="toggleForm()">
    <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="Chat WA">
  </div>  

  <div class="form-popup" id="formPopup">
    <div class="form-header">
      <span>Hubungi Admin</span>
      <button onclick="closeForm()">âŒ</button>
    </div>
    <div class="form-body">
      <label for="message">Isi Pesan</label>
      <textarea id="message" rows="3" placeholder="Tulis pesan..."></textarea>
      <div class="form-admin mt-3">
        <img id="adminImg" src="/risma/img/pulung.png" alt="Foto Admin">
        <span id="adminName">Pulung Riswanto</span>
      </div>
      <button class="kirim-btn mt-3" onclick="sendWA()">Kirim via WhatsApp</button>
    </div>
  </div>

  <script src="wa.js"></script>  

  <footer class="text-center text-muted py-4">
    <small>ğŸ“Œ Laporan Keuangan BSI | Meta Pertanian</small>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>