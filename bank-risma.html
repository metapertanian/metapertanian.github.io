<!DOCTYPE html><html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BANK RISMA by RISMA FARM</title>  <link rel="stylesheet" href="/style.css" />
  <script src="/anggota.js"></script>  <!-- data lahan -->  <script src="/rismafarm.js"></script>  <script src="/umi.js"></script>  <script src="/umi2.js"></script>  <!-- transaksi -->  <script src="/tariktunai.js"></script>  <script src="/bank-risma.js"></script>  <script src="/navbar.js"></script></head>
<body><main class="container">  <h1>üè¶ BANK RISMA</h1>
  <p class="muted">Rekap bonus panen & saldo anggota RISMA FARM</p>  <!-- SUMMARY -->  <section class="grid-3" id="summary">
    <div class="card">
      <h3>Total Bonus Panen</h3>
      <div class="big-number" id="totalBonus">0</div>
    </div>
    <div class="card">
      <h3>Bonus Diambil</h3>
      <div class="big-number" id="totalTarik">0</div>
    </div>
    <div class="card">
      <h3>Sisa Saldo</h3>
      <div class="big-number" id="sisaSaldo">0</div>
    </div>
  </section>  <p class="update" id="lastUpdate"></p>  <!-- TABEL ANGGOTA -->  <section class="card">
    <h2>Saldo Bonus Anggota</h2>
    <table>
      <thead>
        <tr>
          <th>Anggota</th>
          <th>Bonus</th>
          <th>Diambil</th>
          <th>Saldo</th>
        </tr>
      </thead>
      <tbody id="tabelAnggota"></tbody>
    </table>
  </section>  <!-- RIWAYAT -->  <section class="card">
    <h2>Riwayat Bonus & Tarik Tunai</h2>
    <div id="riwayat"></div>
    <div class="pagination" id="pagination"></div>
  </section></main><script>
const { totalBonus, totalTarik, sisaSaldo, tabelAnggota, riwayat } = window.BANK_RISMA_DATA;

function animateValue(el, end) {
  let start = 0;
  const duration = 3000;
  const startTime = performance.now();

  function step(now) {
    const progress = Math.min((now - startTime) / duration, 1);
    const value = Math.floor(progress * end);
    el.textContent = value.toLocaleString('id-ID');
    if (progress < 1) requestAnimationFrame(step);
  }
  requestAnimationFrame(step);
}

animateValue(document.getElementById('totalBonus'), totalBonus);
animateValue(document.getElementById('totalTarik'), totalTarik);
animateValue(document.getElementById('sisaSaldo'), sisaSaldo);

// update terakhir
if (riwayat.length) {
  document.getElementById('lastUpdate').textContent = `Terakhir diperbarui: ${riwayat[0].tanggal}`;
}

// tabel anggota
const tbody = document.getElementById('tabelAnggota');
tabelAnggota.forEach(a => {
  const tr = document.createElement('tr');
  tr.innerHTML = `
    <td>${a.nama}</td>
    <td>${a.bonus.toLocaleString('id-ID')}</td>
    <td>${a.tarik.toLocaleString('id-ID')}</td>
    <td class="saldo">${a.saldo.toLocaleString('id-ID')}</td>
  `;
  tbody.appendChild(tr);
});

// RIWAYAT + PAGINATION
const perPage = 5;
let current = 1;

function renderRiwayat(page) {
  const box = document.getElementById('riwayat');
  box.innerHTML = '';

  const start = (page - 1) * perPage;
  const slice = riwayat.slice(start, start + perPage);

  slice.forEach(r => {
    const div = document.createElement('div');
    div.className = 'riwayat-item';
    div.innerHTML = `
      <strong>${r.tanggal}</strong> ‚Äî ${r.keterangan}<br>
      <span class="${r.tipe}">${r.jumlah.toLocaleString('id-ID')}</span>
    `;
    box.appendChild(div);
  });

  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function renderPagination() {
  const pages = Math.ceil(riwayat.length / perPage);
  const pag = document.getElementById('pagination');
  pag.innerHTML = '';

  for (let i = 1; i <= pages; i++) {
    const btn = document.createElement('button');
    btn.textContent = i;
    btn.onclick = () => { current = i; renderRiwayat(i); };
    if (i === current) btn.classList.add('active');
    pag.appendChild(btn);
  }
}

renderRiwayat(current);
renderPagination();
</script></body>
</html>