<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pendaftaran Lomba Konten | Rumah Kreator by PROxyz</title>
  <link rel="stylesheet" href="gaya.css" />
  <link rel="stylesheet" href="daftar.css" />
</head>
<body>

  <!-- ğŸ” NAVBAR -->
  <nav class="nav">
    <button class="nav-toggle" onclick="toggleMenu()">â˜°</button>
    <div class="nav-links" id="menu">
      <a href="/kreator">Rumah Kreator</a>
      <a href="/kreator/#hadiah">Hadiah</a>
      <a href="/kreator/#poin">Poin Kreator</a>
      <a href="/kreator/#aturan">Aturan</a>
      <a href="/kreator/tips">Tips & Trik</a>
    </div>
    <a href="/" class="nav-brand">Pendaftaran</a>
    <button class="theme-toggle" onclick="toggleTheme()">ğŸ”†</button>
  </nav>

  <!-- ğŸ‘¤ HEADER -->
  <header class="header">
    <img src="/img/pulung.jpg" alt="Profil" class="profil-img">
    <div class="kutipan" id="kutipan"></div>
    <div id="sambutan"></div>
  </header>

  <!-- ğŸ“ FORM PENDAFTARAN -->
  <section class="form-section">
    <div id="statusBox" class="status-box"></div>

    <div class="form-container">
      <label for="grup">Grup</label>
      <input type="text" id="grup" readonly placeholder="Akan diisi otomatis..." />

      <label for="tiktok">Nama Akun TikTok *</label>
      <input type="text" id="tiktok" placeholder="@namapengguna" required />

      <label for="caption">Caption *</label>
      <textarea id="caption" placeholder="Keterangan video..." required></textarea>

      <label for="telepon">Nomor Telepon *</label>
      <input type="tel" id="telepon" placeholder="Contoh: 089512345678" required />

      <label for="hp">Merek HP *</label>
      <input type="text" id="hp" placeholder="Oppo A78" required />

      <button onclick="kirimWA()">Kirim ke WhatsApp</button>
    </div>
  </section>

  <footer>Â© 2025 Rumah Kreator by Tanjung Bulan Cyberâ„¢</footer>

  <script src="kutipan.js"></script>
  <script>

// =========================================================
// ğŸŒ— Tema Terang & Gelap (default: terang, elegan & kontras lembut)
// =========================================================
function toggleTheme() {
  document.body.classList.toggle('dark-theme');
  const isDark = document.body.classList.contains('dark-theme');
  localStorage.setItem('theme', isDark ? 'dark' : 'light');
  applyThemeColors();
  setTimeout(() => {
    startKutipanIfVisible();
    tampilkanDataSeason();
  }, 80);
}

function applyThemeColors() {
  const isDark = document.body.classList.contains('dark-theme');

  // ğŸ¨ Warna dasar elegan
  document.documentElement.style.setProperty('--bg-color', isDark ? '#0b1216' : '#f3f5f7');
  document.documentElement.style.setProperty('--text-color', isDark ? '#f2f2f2' : '#1a1a1a');
  document.documentElement.style.setProperty('--card-bg', isDark ? 'rgba(255,255,255,0.05)' : '#ffffff');
  document.documentElement.style.setProperty('--input-bg', isDark ? '#101820' : '#ffffff');
  document.documentElement.style.setProperty('--shadow', isDark ? '0 2px 10px rgba(0,0,0,0.6)' : '0 2px 10px rgba(0,0,0,0.08)');
  document.documentElement.style.setProperty('--highlight', isDark ? '#ffeb3b' : '#c79400');
  document.documentElement.style.setProperty('--accent', isDark ? '#2196f3' : '#0077b6');
  document.documentElement.style.setProperty('--section-bg', isDark ? 'rgba(255,255,255,0.03)' : 'rgba(0,0,0,0.02)');

  document.documentElement.style.height = "100%";
  document.body.style.height = "100%";
  document.body.style.margin = "0";
  document.body.style.backgroundColor = "var(--bg-color)";
  document.body.style.color = "var(--text-color)";
  document.body.style.fontFamily = "Poppins, Arial, sans-serif";
  document.body.style.overflowX = "hidden";
  document.body.style.transition = "background-color .3s, color .3s";
}

window.addEventListener('DOMContentLoaded', () => {
  const savedTheme = localStorage.getItem('theme');
  // ğŸŸ¢ Tema terang sebagai default
  if (savedTheme === 'dark') {
    document.body.classList.add('dark-theme');
  }
  applyThemeColors();

  // offset scroll agar tidak tertutup navbar
  document.querySelectorAll('section[id]').forEach(sec => {
    sec.style.scrollMarginTop = '90px';
    sec.style.background = 'var(--section-bg)';
    sec.style.borderRadius = '12px';
    sec.style.padding = '12px 10px';
    sec.style.margin = '16px auto';
    sec.style.maxWidth = '900px';
    sec.style.boxShadow = 'var(--shadow)';
  });

  setupKutipanObserver();
  setTimeout(() => tampilkanDataSeason(), 100);
});

// =========================================================
// ğŸ”˜ Navbar Toggle (muncul dari kiri)
// =========================================================
function toggleMenu() {
  const menu = document.getElementById("menu");
  menu.classList.toggle("active");
  menu.style.left = menu.classList.contains("active") ? "0" : "-100%";
}
document.querySelectorAll("#menu a").forEach(link => {
  link.addEventListener("click", () => {
    const menu = document.getElementById("menu");
    menu.classList.remove("active");
    menu.style.left = "-100%";
  });
});


    // =========================================================
    // ğŸ§­ Ambil Parameter URL
    // =========================================================
    const params = new URLSearchParams(window.location.search);
    const nama = params.get("nama") || "Kreator Hebat";
    const grup = params.get("grup") || "";
    const kodeUrl = params.get("kode");
    document.getElementById("grup").value = grup;

    document.getElementById("sambutan").innerHTML = `
      <div class="sambutan-text">
        Hai, <b>${nama}</b>! ğŸ‘‹<br>
        Selamat datang di halaman pendaftaran lomba konten kreator.
      </div>
    `;

    // =========================================================
    // ğŸ”¢ Buat Kode Otomatis [Hari][Jam][Menit][Detik]
    // =========================================================
    function buatKodeHari() {
      const hari = ["Minggu", "Senin", "Selasa", "Rabu", "Kamis", "Jumat", "Sabtu"];
      const now = new Date();
      const h = String(now.getHours()).padStart(2, "0");
      const m = String(now.getMinutes()).padStart(2, "0");
      const s = String(now.getSeconds()).padStart(2, "0");
      return `${hari[now.getDay()]}${h}${m}${s}`;
    }

    // =========================================================
    // ğŸŒ Dapatkan IP & Cegah Penggunaan Ganda
    // =========================================================
    let ipPengguna = "";
    fetch("https://api.ipify.org?format=json")
      .then(r => r.json())
      .then(data => {
        ipPengguna = data.ip;
        const kodeTersimpan = localStorage.getItem(`kode_${ipPengguna}`);
        if (!kodeTersimpan) {
          const kodeBaru = buatKodeHari();
          localStorage.setItem(`kode_${ipPengguna}`, kodeBaru);
          tampilkanStatus(kodeBaru, true);
        } else {
          tampilkanStatus(kodeTersimpan, false);
        }
      })
      .catch(() => {
        tampilkanStatus("Tidak dapat mengambil IP", false);
      });

    // =========================================================
    // âœ… Tampilkan Status Berdasarkan Kode
    // =========================================================
    function tampilkanStatus(kode, baru) {
      const statusBox = document.getElementById("statusBox");
      if (baru) {
        statusBox.innerHTML = `
          <div class="notif success">
            âœ… Kode unik kamu: <b>${kode}</b><br>
            Silakan isi data di bawah ini dan kirim. Jangan lupa kirim juga video karyamu ke grup.
          </div>
        `;
      } else {
        statusBox.innerHTML = `
          <div class="notif warning">
            âš ï¸ Kamu sudah pernah mengakses halaman ini dengan kode <b>${kode}</b>.<br>
            Setiap perangkat hanya bisa menggunakan satu kode.<br><br>
            <a href="https://wa.me/6288971344131?text=Halo%20admin%2C%20saya%20perlu%20kode%20baru%20untuk%20pendaftaran." target="_blank" class="wa-btn">
              ğŸ“ Hubungi Panitia
            </a>
          </div>
        `;
      }
    }

    // =========================================================
    // ğŸ“© Kirim ke WhatsApp
    // =========================================================
    function kirimWA() {
      const kodeAktif = localStorage.getItem(`kode_${ipPengguna}`);
      if (!kodeAktif) {
        alert("âš ï¸ Kode belum valid. Silakan muat ulang halaman atau hubungi panitia.");
        return;
      }

      const tiktok = document.getElementById('tiktok').value.trim();
      const caption = document.getElementById('caption').value.trim();
      const telepon = document.getElementById('telepon').value.trim();
      const hp = document.getElementById('hp').value.trim();
      const grupVal = document.getElementById('grup').value.trim();

      if (!tiktok || !caption || !telepon || !hp) {
        alert("âš ï¸ Harap isi semua kolom yang wajib sebelum mengirim!");
        return;
      }

      const pesan = `*Pendaftaran Lomba Konten Kreator*%0A
ğŸ‘¤ Nama: ${nama}%0A
ğŸ‘¥ Grup: ${grupVal || '-'}%0A
ğŸ“± Akun TikTok: ${tiktok}%0A
ğŸ“ Caption: ${caption}%0A
ğŸ“ Nomor Telepon: ${telepon}%0A
ğŸ“¸ Merek HP: ${hp}%0A
ğŸ”‘ Kode: ${kodeAktif}%0A
%0ASaya telah mengisi formulir pendaftaran.`;

      const nomor = "6288971344131";
      const url = `https://wa.me/${nomor}?text=${pesan}`;
      window.open(url, "_blank");
    }

    // =========================================================
    // ğŸ”˜ Navbar Toggle (mobile)
    // =========================================================
    function toggleMenu() {
      const menu = document.getElementById("menu");
      menu.classList.toggle("active");
    }
  </script>
</body>
</html>